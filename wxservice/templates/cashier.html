<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />


<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>

    {% load static  %}

    <script type="text/javascript" src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>



    <script type="text/javascript" src='{% static "md5.js" %}'></script>

    <script type="text/javascript">

        function testalert() {
            alert("ewww")
        }

        function get_time(){

            var now = new Date();
            var   year=now.getFullYear();
            var   month=now.getMonth()+1;
            var   date=now.getDate();
            var   hour=now.getHours();
            var   minute=now.getMinutes();
            var   second=now.getSeconds();
            return   year+""+month+""+date+""+hour+""+minute+""+second;

        }

        function makeSign(){
            var cashire_params={}
            cashire_params.mchid=$("#mchid").attr("value")
            cashire_params.total_fee=$("#total_fee").val()

            cashire_params.out_trade_no= get_time()


            $("#out_trade_no").attr("value", cashire_params.out_trade_no)


            secret = 'C55AAvaYwJN9BA61'

            var ksort = Object.keys(cashire_params).sort();
            var str = '';
            for(var ki in ksort){
                str += ksort[ki] + '=' + cashire_params[ksort[ki]] + '&';
             }
            str += 'key=' + secret;

            $("#sign").attr("value", hex_md5(str).toUpperCase()) ;


        }


         function aa(){
            var cashire_params={}
            cashire_params.mchid=$("#mchid").attr("value")
            cashire_params.total_fee=$("#total_fee").val()

            cashire_params.out_trade_no= get_time().toString()
            secret = 'C55AAvaYwJN9BA61'

            $("#sign").attr("value", makeSign(cashire_params,secret))

         };

    </script>
    <title>Title</title>
</head>
<body>

<form id="cashier_pay" action="https://payjs.cn/api/cashier" method="post">

    <input id="mchid" type="text" name="mchid" value="ZBEQWD" hidden="hidden">
    <br>
    输入金额:<br>
    <input id="total_fee" type="number" name="total_fee" value="">
     <br>

    <input id="out_trade_no" type="text" name="out_trade_no"  hidden="hidden"><br>

    <input id="sign" type="text" name="sign" value="" hidden="hidden">
    <input type="submit" value="tijao" onclick="makeSign()">

</form>

<p>11111111</p>






</body>
</html>